interactions:
- request:
    body: '{"messages": [{"role": "user", "content": "Tell me a joke"}], "llm_providers":
      [{"provider": "mistral", "model": "mistral-medium-latest", "is_custom": false,
      "context_length": null, "input_price": null, "output_price": null, "latency":
      null}], "metric": "accuracy", "max_model_depth": 1, "hash_content": true}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '309'
      User-Agent:
      - Python-SDK/0.3.41
      content-type:
      - application/json
    method: POST
    uri: https://staging-api.notdiamond.ai/v2/modelRouter/modelSelect
  response:
    body:
      string: '{"providers":[{"provider":"mistral","model":"mistral-medium-latest"}],"session_id":"7419dd14-2fa4-487c-a42b-bae579f7893a"}'
    headers:
      CF-RAY:
      - 925899ee9c58cd3b-SOF
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Date:
      - Mon, 24 Mar 2025 19:33:38 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      content-length:
      - '122'
      rndr-id:
      - d2a83cf6-876d-4d65
      vary:
      - Accept-Encoding
      x-render-origin-server:
      - uvicorn
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"role": "user", "content": "The output should be formatted
      as a JSON instance that conforms to the JSON schema below.\n\nAs an example,
      for the schema {\"properties\": {\"foo\": {\"title\": \"Foo\", \"description\":
      \"a list of strings\", \"type\": \"array\", \"items\": {\"type\": \"string\"}}},
      \"required\": [\"foo\"]}\nthe object {\"foo\": [\"bar\", \"baz\"]} is a well-formatted
      instance of the schema. The object {\"properties\": {\"foo\": [\"bar\", \"baz\"]}}
      is not well-formatted.\n\nHere is the output schema:\n```\n{\"properties\":
      {\"setup\": {\"description\": \"question to set up a joke\", \"title\": \"Setup\",
      \"type\": \"string\"}, \"punchline\": {\"description\": \"answer to resolve
      the joke\", \"title\": \"Punchline\", \"type\": \"string\"}}, \"required\":
      [\"setup\", \"punchline\"]}\n```\nTell me a joke"}], "model": "mistral-medium-latest",
      "temperature": 0.7, "max_tokens": 200, "top_p": 1, "safe_prompt": false, "stream":
      false}'
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate, zstd
      connection:
      - keep-alive
      content-length:
      - '969'
      content-type:
      - application/json
      host:
      - api.mistral.ai
      user-agent:
      - python-httpx/0.27.2
    method: POST
    uri: https://api.mistral.ai/v1/chat/completions
  response:
    body:
      string: '{"id":"40179cab8c1447418ca639e163b71f45","object":"chat.completion","created":1742844818,"model":"mistral-medium-latest","choices":[{"index":0,"message":{"role":"assistant","tool_calls":null,"content":"Here
        is a well-formatted instance of the schema that represents a joke:\n```\n{\n  \"setup\":
        \"Why did the chicken cross the road?\",\n  \"punchline\": \"To get to the
        other side.\"\n}\n```\nThis instance has a \"setup\" property with a string
        value of \"Why did the chicken cross the road?\", and a \"punchline\" property
        with a string value of \"To get to the other side.\". This conforms to the
        schema, which specifies that both the \"setup\" and \"punchline\" properties
        are required and must be strings.\n\nHere is an example of an incorrectly
        formatted instance that does not conform to the schema:\n```\n{\n  \"setup\":
        \"Why did the chicken cross the road?\",\n  \"punchline\": 42\n}\n```\nThis
        instance is not well-formatted because the value of the"},"finish_reason":"length"}],"usage":{"prompt_tokens":219,"total_tokens":419,"completion_tokens":200}}'
    headers:
      CF-RAY:
      - 925899f51824fea5-SOF
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Date:
      - Mon, 24 Mar 2025 19:33:43 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=GEFacZDR4f8aOdee1WUX3APjXcdNMnR2OC9Ja8d8AOw-1742844823-1.0.1.1-flVpMegf5R.jsbPGAQX9jjx_5waN7NtjHmSpO2J3L549HmnEH2wWtwD9TYMjMDqT6h.po2qmH8mGGkAzUMxYdJeNIxaCLlts1vztdEUf2BA;
        path=/; expires=Mon, 24-Mar-25 20:03:43 GMT; domain=.mistral.ai; HttpOnly;
        Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      access-control-allow-origin:
      - '*'
      alt-svc:
      - h3=":443"; ma=86400
      cf-cache-status:
      - DYNAMIC
      content-length:
      - '1064'
      ratelimitbysize-limit:
      - '2000000'
      ratelimitbysize-query-cost:
      - '336'
      ratelimitbysize-remaining:
      - '1998784'
      ratelimitbysize-reset:
      - '22'
      x-envoy-upstream-service-time:
      - '4458'
      x-kong-proxy-latency:
      - '1'
      x-kong-request-id:
      - f399b93172134219a37ddd79af14057a
      x-kong-upstream-latency:
      - '4566'
      x-ratelimitbysize-limit-minute:
      - '2000000'
      x-ratelimitbysize-limit-month:
      - '10000000000'
      x-ratelimitbysize-remaining-minute:
      - '1998784'
      x-ratelimitbysize-remaining-month:
      - '9999740030'
    status:
      code: 200
      message: OK
version: 1
